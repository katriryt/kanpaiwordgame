{% extends "layout.html" %}
{% block content %}

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script type="text/javascript">
$(function(){
    $("button").click(function() {
        var right = "{{ series_cards[session['gameinfo']['roundnumber']][4] }}";
        var fired_button = $(this).val();
        if (fired_button == right) {
            // alert('You got the RIGHT answer!')
            $('#output').html('You got the RIGHT answer!');
            // change to next question
        } else {
            // alert('You GOT THE WRONG answer!!!')
            $('#output').html('You for the WRONG answer!!!');

            $.ajax({
                url: 'http://127.0.0.1:5000/processinput',
                type: 'POST',
                data: JSON.stringify('send whatever: stuff'),
                processData: false,
                contentType: 'application/json'
            });
        }
        return false;
    });
});
</script>

    <p><a href="/play_game?rndnm=-1&gamename=adjectives">start a new game with adjectives</a></p>

    {% print('kyukkuluutruur') %}

    <hr>

    <h2>Game statistics </h2>
    <p><b>User id: </b> {{ session["user_id"] }} </p>
    <p><b>User name: </b> {{ session["user_name"] }} </p>
    <p><b>Game name: </b> {{ session["gameinfo"]["gamename"] }} </p>
    <p><b>Words in game: </b> {{ session["gameinfo"]["maxrounds"] }} </p>
    <p><b>Words played: </b> {{ session["gameinfo"]["roundnumber"] }} </p>
    <p><b>Words correct: </b> {{ session["gameinfo"]["correctanswers"] }} </p>

    <hr>

    <p>{% print(request.args['rndnm']) %}</p>

    <p>{% print(session['gameinfo']) %}</p>

    <p><a href="/play_game?rndnm={{ session['gameinfo']['roundnumber'] }}&gamename=adjectives">play the next round with adjectives</a></p>

    <h2>Games </h2>

    <p>Note: links do not yet work </p>

    <p>
        {% for game_name in game_names %} 
            <a href="">{{game_name}}</href></a>
        {% endfor %}
    </p>

    <form name="something" action="/play_game" method="POST">
        <p>
            {% for game_name in game_names %}
                <input type="radio" name="wanted_game" value={{game_name}}> {{game_name}}
            {% endfor %}
        </p>
    </form>

    <h2>Game: {{ session['gameinfo']['gamename'] }}</h2>

    {% if session['gameinfo']['roundnumber'] < session['gameinfo']['maxrounds']  %}
        <p>
            <div class ="alternatives">{{ series_cards[session['gameinfo']['roundnumber']][1] }}</div>
            <div class ="alternatives">{{ series_cards[session['gameinfo']['roundnumber']][2] }}</div>
            <div class ="alternatives">{{ series_cards[session['gameinfo']['roundnumber']][3] }}</div>
        </p>
        <p>
            <div class ="alternatives_description">kanji</div>
            <div class ="alternatives_description">hiragana/katakana</div>
            <div class ="alternatives_description">roomaji</div>
        </p>

        <p><b>Select the correct meaning:</b></p>
        <p>

            {% for item in series_cards[session['gameinfo']['roundnumber']][5] %}
                <button id="{{ loop.index }}" name="{{ loop.index }}" value="{{ item }}">{{item}}</button>
            {% endfor %}
        </p>

        <p>Check: {{ series_cards[session['gameinfo']['roundnumber']] }}</p>
        <p>Right answer: {{ series_cards[session['gameinfo']['roundnumber']][4] }}</p>

        <p>
            <div id="output">
                Placeholder
            </div>
        </p>

    {% else: %}
        <p> Game over! </p>

    {% endif %}
    <p>Want to give feedback? <a href="/feedback">Feedback</a></p>
    <p>Want to sign out? <a href="/signout">Sign out</a></p>

{% endblock %}